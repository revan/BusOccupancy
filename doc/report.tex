\documentclass[12pt,journal,compsoc]{IEEEtran} % Set to 11pt if we ever have the luxury of doing so.
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[cmex10]{amsmath}
\usepackage{stfloats}
\usepackage[section]{placeins}
\usepackage{pgf}
\usepackage{pgfplots}
\usepackage{minted}
\usemintedstyle{tango}
\usepgfplotslibrary{external}
\tikzexternalize
\graphicspath{ {img/} }

% IMPORTANT:
%  This document class uses logical paragraphs rather than manual ones.
%  In other words, use a blank line instead of \\ to start a new paragraph.

\newcommand{\minifig}[3]{
  \begin{figure}[!t]
    \centering
    \includegraphics[width=\columnwidth]{#1}
    \caption{#2}
    \label{#3}
  \end{figure}
}

\newcommand{\bigfig}[3]{
  \begin{figure*}[!t]
    \centering
    \input{fig/#1.pgf}
    \caption{#2}
    \label{#3}
  \end{figure*}
}

\newcommand{\biglst}[4]{
  \begin{listing*}[!t]
    \centering
    \inputminted{#1}{#2}
    \caption{#3}
    \label{#4}
  \end{listing*}
}

\newcommand{\ditem}[2]{\item[#1] \hfill \\ #2}

\begin{document}
\title{Programatically Predicting [Bus] Occupancy\\
{\large Undergraduate Independent Research Report}}
\author{Daniel~Bordak, Erin~Corrado, Revan~Sopher, and Ashley~Weaver}

\IEEEtitleabstractindextext{% Comment to prevent unwanted space
\begin{abstract}
In this study we address the problem of programatically predicting bus occupancy.
We approach this in two ways: by using publicly available GPS positions to calculate stop time, and by using promiscuous Wi-Fi to count devices.
While the stop time approach proved unfruitful due to the significant time requirement in establishing a benchmark by which to interpret the data, the Wi-Fi approach yielded an accurate model once we compensated for noise.
We conclude by suggesting modifications to the experiment, and the application of this methodology to the determination of occupancy of other locales.
\end{abstract}}

\maketitle

%TODO: Reference *every* figure at least once in the text.

\section{Motivation}

\IEEEPARstart{D}{ue to} the periodic nature of class schedules, students at Rutgers tend to move between campuses during certain known time intervals during the day.
This leads to predictable migratory patterns.
However, the bus schedule does a poor job of taking student schedules into account -- for example, on Livingston campus, buses on the route to College Avenue can often be found lined up at the stops consecutively, while the buses on the route to Busch are much rarer.
To make matters worse, the Busch buses are usually packed to capacity between class periods.
The aim of this project is to develop a system for better predicting the demand for buses, such that an empirical argument for the optimization of the bus schedule might be made.

\input{approach}

\section{Bus Route}
The Rutgers bus system encompasses several routes between its campuses.
For the purpose of our study, we needed only to monitor one; conducting all collections on the same path is essential to producing comparable data.
We decided to monitor the A route, the route connecting Busch and College Ave campuses clockwise.
We chose this route because of its high passenger throughput and its urban setting would suggest a higher concentration of wireless devices.

\minifig{aroutebusch}{A Route: Busch Classrooms} {fig:aroutebusch}


\minifig{aroutecollegeave}{A Route: College Ave}{aroutecollegeave}


\minifig{aroutestadium}{A Route: Busch Stadium}{fig:aroutestadium}

\begin{figure}[!h]
  \centering
  \begin{tabular}{ r|l }
    1 & Buell Apartments\\
    2 & Werblin Recreation Center\\
    3 & Rutgers Student Center\\
    4 & Scott Hall\\
    5 & Student Activity Center\\
    6 & Visitor's Center\\
    7 & Stadium\\
    8 & Werblin Recreation Center\\
    9 & Hill Center\\
    10 & Allison Road Classrooms Building\\
    11 & Library of Science \& Medicine\\
    12 & Busch Suites\\
    13 & Busch Campus Center\\
  \end{tabular}
\end{figure}

\input{graphing}
\input{results}
\input{future}

\FloatBarrier

\appendix[Team Member Contributions]
\subsection*{Daniel Bordak}
\begin{description}
\ditem{Collected tcpdump and classroom data}{}
\ditem{Created tcpdump output parser}{
  Current implementation's design came from privacy concerns and speed requirements.
  Encountered difficulties in matching arbitrary MAC addresses and determining their type, as well as the aformentioned privacy concerns.
}
\ditem{Optimized graph plotting functions}{
  First implementation of original plotting functions were painfully slow and had large amounts of redundant code.
  Refactoring solved the redundancy, but more importantly the usage of external libraries solved the speed issue.
  Integration of these libraries was particularly difficult, however, due to their demand of vectorized code.
}
\ditem{Cowrote First-Last Grid Plot.}{
  Solved issues with axes.
}
\ditem{Cowrote Segments Plot.}{
  Rewrote to better utilize Pandas features, dramatically increasing speed and accuracy.
}
\ditem{Wrote script to generate stop annotations}{
  The desire to reduce redundancy led to the implementation of a common parser between both stop data and packet data.
  This script was applied to all graphs based on bus data.
}
\ditem{Wrote sections of the report pertaining to the creation of plots.}{
  Difficulty encountered in remembering everything I did.% Heehee
}
\ditem{Formatted report, including logfile syntax highlighting.}{TODO: Expand this a lot.}
\end{description}

\subsection*{Erin Corrado}
\begin{description}
\ditem{Collected bus and classroom data.}{}
\ditem{Cowrote First-Last Grid Plot.}{
  Difficulties in learning more advanced Python and learning how to utilize the Python libraries Numpy and Matplotlib.
}
\ditem{Wrote length/occupancy correlation plot.}{
  Data was difficult to interpret at times.
  Data was time consuming to collect and limited.
}
\ditem{Cowrote poster.}{
  Difficulty with trying to get the poster printed and transported to the proper place in time.
}
\ditem{Cowrote Packet Histogram.}{
  Encountered difficulties with utilizing the new libraries used such as Pandas.
}
\ditem{Proofread and edited report and graphs.}{
  Hardest part was keeping everyone's contributions in sync with one another.
  Also the group had to decide on style and formatting.
}
\end{description}

\subsection*{Revan Sopher}
\begin{description}
\item [Wrote Proposal] \hfill \\
	Designed two-method approach, laying out plan for study. Written at 3:00AM of deadline while team slept.
\item [Collected tcpdump data] \hfill \\
	First data collection of study, so needed to figure out which tool to use and how to use it, and how to put a wireless card in monitor mode.
\item [Wrote Raw Packet Plot] \hfill \\
	First plot of study, so needed to choose and learn tools (matplotlib, numpy). Also needed to write annotation script and parser for tcpdump output, including a regex for matching MAC, as this was before Dan's rewrite.
\item [Wrote Unique Device Plot] \hfill \\
	First data processing of study. Later plots drew from this one.
\item [Cowrote Segments Plot] \hfill \\
	This was after Dan's refactoring, so needed to situate myself and learn the more efficient looping techniques.
\item [Wrote Vector Plot] \hfill \\
	Need to create and sum vectors from the data caused this plot to be significantly different.
\item [Wrote Report] \hfill \\
	Wrote entirety of report as first submitted. Expanded content and wrangled with LaTeX for later revisions.
\end{description}

\subsection*{Ashley Weaver}
\begin{description}{}
\ditem{Cowrote report}{
	Editing first drafts.
	Research for future works section.
}
\ditem{Cowrote Poster}{
	Difficulty designing layout to fit all graphs and descriptions.
}
\ditem{Collected bus data}{
	Spent a long time simply waiting for the bus.
	Bus was often delayed due to traffic.
}
\end{description}

\end{document}
